# **Quiz App**

## Опис на апликацијата

Апликацијата што ја развиваме е класична квиз аплкација.

Со цел да се обезбеди фер натпревар помеѓу натпреварувачите кој ќе ја
користат апликацијата, на секој квиз се поставуваат различни прашања без
повторување.

Прашањата се добиени преку API повици кој враќаат рандом изгенерирани
прашања од endpoint.

Квизот содржи 3 категории на прашања:

-   DevOps

-   Linux

-   Random programming quiz

И постојат 2 типа на прашања:

-   Со еден точен одговор

-   Со повеќе точни одговори

Секое прашање од квизот носи 5 поени.

## Структура на апликацијата 

### MainMenu Form

Главната форма во нашата апликација која што ги повикува другите форми е
формата **MainMenu**.

Од оваа форма се стартуваат различните квизови(се повикува формата
**QuizApp**) и се пристапува leaderboard-от(се повикува формата
**Leaderboard**). Покрај тоа, во оваа форма се поставува и се чува
username-от на моменталниот корисник.

### QuizForm Form

Формата **QuizApp** претставува „срцето" на нашата апликација. Во оваа
класа се наоѓаат главните функционалности. Тука се чуваат листата на
прашања, категоријата на квизот, API Client-от од каде што се добиваат
прашањата, timer-от и други податоци и многу методи кои се потребни за
коректно работење на апликацијата.

### Leaderboard Form

Формата **Leaderboard** ни служи за прикажување на резултатите од
корисниците. Ги користи податоците кои се зачувани во текстуалната
датотека **./bin/Debug/leaderboard.txt** од страна на методот
**SubmitQuestion** во класата **QuizForm** и ги прикажува во ListBox.

### QuizAPIClient Class

Класата **QuizAPIClient** служи за асинхроно повлекување на прашања од
категоријата која се селектира и бројот на прашања кој се селектираат од
слајдерот во главното мени. Тука исто така се чува класата **Quеstion**
во која се чуваат потребните податоци за секое прашање(одговорот, дали е
multiple choice, итн.), методот **GetCorrectAnswers** кој ги дава
точните одговори и методот **SaveSelectedAnswers** кој ни ги зачувува
одговорите за секое прашање.

## Упатсво за користење 

### Стартување на апликацијата

![Main menu](https://github.com/ibunceski/VP-Proektna/assets/138616549/f34a4c48-e856-4b19-a0b3-4cb24a611666)

На почетниот прозорец се прикажани слики од квизовите, слајдер за
одбирање на број на прашања, поле за вметнување на username и пристап до
leaderboard-от.


### Стартување на квиз

За да се започне било кој од квизовите треба да се внесе корисничко име,
да се одбере бројот на прашања (по default 5) и да се кликне на
прозорецот со слика која е соодветна за темата на квизот.\
По стартување на квизот започнува тајмер кој мери колку време му било
потребно на корисникот да го заврши квизот.

### Одговарање на прашањата

![pocnat kviz](https://github.com/ibunceski/VP-Proektna/assets/138616549/f5e8d494-657c-4b2c-b726-52435e7dee76)

Откако ќе се стартува квизот на екран се прикажува моменталното прашање,
нумерирани копчиња за прашањата, копчиња за следно и претходно прашање
за полесна навигација, тајмерокој прикажува колку време е изминато и
progress bar кој се пополнува со секое одговорено прашање.

### Завршување на квизот

![zavrsen kviz](https://github.com/ibunceski/VP-Proektna/assets/138616549/97859868-a7ad-4d8e-9725-2cd5a2b1116b)

Кога корисникот ќе стигне на последното прашање се појавува submit копче
кое при клик го стопира тајмерот и се појавува прозорец кој на
корисникот му дава опции да направи review на одговорените прашања, да
види на кое место се наоѓа на leaderboard-от или да ја затвори
апликацијата.

Кога корисникот прави review, точните прашања се обојуваат зелени, а
погрешно одговорените црвени.

## Leaderboard

![лидер](https://github.com/ibunceski/VP-Proektna/assets/138616549/0f394aa7-0a97-42b3-a8de-ff3f38c1fbb3)

Тука се чуваат сите резултати од играчите, тие се прикажани со нивното
внесено корисничко име од главното мени, бројот на поени кој го освоиле
и датумот и времето кога го започнале квизот. Резултатите од сите
корисници на квизот се зачувуваат локално на корисничкиот уред во
**./bin/Debug/leaderboard.txt** и од таму се читаат при секое отворање
на\
leaderboard-от.

Резултатите од натпреварувачите се сортирани според бројот на поени во
опаѓачки редослед.

## Објаснување на функцијата DisplayQuestion во класата QuizApp 
Оваа функција служи за да се прикаже секое прашање во квизот. Во продолжение следи детално објаснување како е постигнато тоа, објаснувајќи ја секоја линија од оваа фунцкија.
Прво ги бришиме претходните одговори преку 
```
panelAnswers.Controls.Clear();
```
Потоа проверуваме дали сме добиле валидна листа на прашања преку условот
```
if (questions != null && questions.Count > 0)
```
И ако сме добиле валидни прашања ги прикажуваме преку:
```
Question question = questions[currentQuestionIndex];
labelQuestion.Text = $"{currentQuestionIndex + 1}. {question.question}";
```
Проверуваме дали сме на првото или последното прашање за да знаеме дали да ги прикажиме навигациските копчиња за напред и назад со:
```
previousButton.Visible = currentQuestionIndex > 0;
nextButton.Visible = currentQuestionIndex < numQuestions - 1;
```
И потоа ги прикажуваме одговорите 
```
int yPos = 10;
foreach (var answer in question.answers)
{
    if (!string.IsNullOrEmpty(answer.Value))
    {
        Control control = question.multiple_correct_answers
            ? new CheckBox { Checked = question.QuestionsSelectedByUser.Contains(answer.Value) }
            : new RadioButton { Checked = question.QuestionsSelectedByUser.Contains(answer.Value) };

        control.Text = answer.Value;
        control.Tag = answer.Key;
        control.AutoSize = true;
        control.Location = new System.Drawing.Point(10, yPos);
        control.Enabled = !isReviewMode;
        panelAnswers.Controls.Add(control);
        yPos += 30;
    }
}
```

Но, ако сме во ReviewMode влегуваме во условот каде што покрај прашањето го прикажуваме и точниот одговор и освоените поени:
```
if (isReviewMode)
{
    var correctAnswersLabel = new Label
    {
        Text = $"Correct answers: {string.Join(", ", question.GetCorrectAnswers())}, Points: {(AreAnswersCorrect(question) ? 5 : 0)}",
        AutoSize = true,
        Location = new System.Drawing.Point(10, yPos)
    };
    panelAnswers.Controls.Add(correctAnswersLabel);
}
```

Проверуваме дали сме на последното прашање за да се прикаже submit копчето:
```
submitButton.Visible = currentQuestionIndex == questions.Count - 1 || isReviewMode;
```

